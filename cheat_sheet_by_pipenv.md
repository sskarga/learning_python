# pipenv

## Начало работы

Установим последнюю версию pipenv:

    $ pip install pipenv

Управление рабочим окружением

Перейдем в каталог с Python проектом и создадим виртуальное окружение указав версию интерпретатор:

    $ cd yourproject
    $ pipenv --python 3.7

Команда автоматически создаст новое виртуальное окружение для вашего проекта, если он еще не существует.

Активировать виртуальное окружение проекта можно выполнив команду shell:


    $ pipenv shell

Выход из оболочки виртуального окружения осуществляется с помощью команды exit:


    $ exit

## Управление зависимостями приложения

Для установки пакетов воспользуемся командой install:


$ pipenv install Flask

Pipenv установит последнюю версию пакета Flask и автоматически добавит его в Pipfile.


При установке можем задать конкретную версию пакета:


$ pipenv install Flask==1.0.2

Разработчики данного инструмента позаботились и о работе со средой разработки — пакетами, которые необходимы на этапе сборки или тестирования приложений.


При указании флага --dev, пакет будет установлен как часть среды разработки:


$ pipenv install pytest --dev

Чтобы установить все пакеты, включая пакеты среды разработки необходимо выполнить:


$ pipenv install --dev

Для удаление пакетов существует команда uninstall:


$ pipenv uninstall Flask

Сведения об установленных пакетах и их зависимостях хранятся в файле Pipfile.lock, который генерируется автоматически и не должен быть изменен пользователем.


## Запуск исходного кода

Существует возможность запуска исходного кода внутри оболочки virtualenv:


$ pipenv run python yourapplication.py

При наличии файла .env команды $ pipenv shell и $ pipenv run, автоматически подгрузят из него переменные окружения:


$ cat .env
DEBUG=1

$ echo $DEBUG
1

## Развертывание приложения

Pipenv позволяет устанавливать зависимости в родительскую систему при указании флага --system:


$ pipenv install --system

Это полезно при развертывания приложений в Docker.


При указании флага --deploy — pipenv выдаст ошибку, если Pipfile.lock устарел или версия Python не соответсвует указанной.